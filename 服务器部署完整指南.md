# ğŸš€ XingYingMei é¡¹ç›®æœåŠ¡å™¨éƒ¨ç½²å®Œæ•´æŒ‡å—

## ğŸ“‹ éƒ¨ç½²æ¦‚è§ˆ

æœ¬æŒ‡å—åŒ…å«å°† XingYingMei é¡¹ç›®å®Œæ•´éƒ¨ç½²åˆ° Ubuntu æœåŠ¡å™¨çš„æ‰€æœ‰æ­¥éª¤ï¼ŒåŒ…æ‹¬ï¼š
- æ–‡ä»¶ä¸Šä¼ 
- ç¯å¢ƒé…ç½®
- æ•°æ®åº“éƒ¨ç½²
- Nginx é…ç½®
- æœåŠ¡å¯åŠ¨

---

## ğŸ”§ 1. æœåŠ¡å™¨ç¯å¢ƒå‡†å¤‡

### 1.1 è¿æ¥æœåŠ¡å™¨
```bash
# SSH è¿æ¥åˆ°æœåŠ¡å™¨
ssh root@ä½ çš„æœåŠ¡å™¨IP

# é¦–æ¬¡è¿æ¥ä¼šæç¤ºä¸»æœºçœŸå®æ€§ï¼Œè¾“å…¥ yes ç¡®è®¤
# ç„¶åè¾“å…¥æœåŠ¡å™¨å¯†ç 
```

### 1.2 å®‰è£…å¿…è¦ç¯å¢ƒ
```bash
# æ›´æ–°ç³»ç»Ÿ
apt update && apt upgrade -y

# å®‰è£… Nginx
apt install -y nginx

# å®‰è£… OpenJDK 21
apt install -y openjdk-21-jdk

# å®‰è£… Node.js 18
curl -fsSL https://deb.nodesource.com/setup_18.x | bash -
apt install -y nodejs

# å®‰è£… MySQL 8.0
apt install -y mysql-server

# å®‰è£…å…¶ä»–å·¥å…·
apt install -y git curl wget unzip
```

---

## ğŸ“ 2. é¡¹ç›®æ–‡ä»¶ä¸Šä¼ 

### 2.1 æœ¬åœ°å‡†å¤‡é¡¹ç›®æ–‡ä»¶
```bash
# åœ¨æœ¬åœ° macOS ç»ˆç«¯ï¼Œè¿›å…¥é¡¹ç›®ç›®å½•
cd /Users/chenxiwen/code/web1/xingyingmei

# æ„å»ºå‰ç«¯é¡¹ç›®
npm install
npm run build

# æ„å»ºåç«¯é¡¹ç›®
./mvnw clean package -DskipTests

# åˆ›å»ºé¡¹ç›®å‹ç¼©åŒ…ï¼ˆå¯é€‰ï¼‰
zip -r xingyingmei.zip . -x "node_modules/*" ".git/*" "target/classes/*"
```

### 2.2 ä¸Šä¼ é¡¹ç›®åˆ°æœåŠ¡å™¨
```bash
# æ–¹æ³•1ï¼šä½¿ç”¨ scp ä¸Šä¼ æ•´ä¸ªé¡¹ç›®ç›®å½•
scp -r /Users/chenxiwen/code/web1/xingyingmei root@ä½ çš„æœåŠ¡å™¨IP:/opt/

# æ–¹æ³•2ï¼šä¸Šä¼ å‹ç¼©åŒ…
scp xingyingmei.zip root@ä½ çš„æœåŠ¡å™¨IP:/opt/

# å¦‚æœä½¿ç”¨å‹ç¼©åŒ…ï¼Œåœ¨æœåŠ¡å™¨ä¸Šè§£å‹
cd /opt
unzip xingyingmei.zip
mv xingyingmei xingyingmei  # é‡å‘½åç›®å½•ï¼ˆå¦‚æœéœ€è¦ï¼‰
```

### 2.3 è®¾ç½®é¡¹ç›®æƒé™
```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
# åˆ›å»ºé¡¹ç›®ç”¨æˆ·
useradd -m -s /bin/bash xingyingmei

# è®¾ç½®é¡¹ç›®ç›®å½•æƒé™
chown -R xingyingmei:xingyingmei /opt/xingyingmei
chmod +x /opt/xingyingmei/target/*.jar
chmod +x /opt/xingyingmei/mvnw

# åˆ›å»ºå¿…è¦ç›®å½•
mkdir -p /opt/xingyingmei/uploads
mkdir -p /opt/xingyingmei/logs
chown -R xingyingmei:xingyingmei /opt/xingyingmei/uploads
chown -R xingyingmei:xingyingmei /opt/xingyingmei/logs
```

---

## ğŸ—„ï¸ 3. æ•°æ®åº“éƒ¨ç½²

### 3.1 æœ¬åœ°å¯¼å‡ºæ•°æ®åº“
```bash
# åœ¨æœ¬åœ° macOS ç»ˆç«¯æ‰§è¡Œ
cd /Users/chenxiwen/code/web1/xingyingmei

# å¯¼å‡ºæ•°æ®åº“ï¼ˆæ•°æ®åº“åï¼šcxwï¼Œç”¨æˆ·ï¼šrootï¼Œå¯†ç ï¼š123456ï¼‰
mysqldump -u root -p123456 cxw > cxw_backup.sql

# æ£€æŸ¥å¯¼å‡ºæ–‡ä»¶
ls -la cxw_backup.sql
```

### 3.2 ä¸Šä¼ æ•°æ®åº“æ–‡ä»¶
```bash
# ä¸Šä¼ æ•°æ®åº“å¤‡ä»½æ–‡ä»¶åˆ°æœåŠ¡å™¨
scp cxw_backup.sql root@ä½ çš„æœåŠ¡å™¨IP:/tmp/

# ä¸Šä¼ æ•°æ®åº“é…ç½®æ–‡ä»¶
scp src/main/resources/application.properties root@ä½ çš„æœåŠ¡å™¨IP:/opt/xingyingmei/src/main/resources/
```

### 3.3 æœåŠ¡å™¨é…ç½® MySQL
```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
# å¯åŠ¨ MySQL æœåŠ¡
systemctl start mysql
systemctl enable mysql

# å®‰å…¨é…ç½® MySQLï¼ˆè®¾ç½® root å¯†ç ä¸º 123456ï¼‰
mysql_secure_installation
# æŒ‰æç¤ºæ“ä½œï¼š
# - è®¾ç½® root å¯†ç ï¼š123456
# - ç§»é™¤åŒ¿åç”¨æˆ·ï¼šY
# - ç¦æ­¢ root è¿œç¨‹ç™»å½•ï¼šY
# - ç§»é™¤æµ‹è¯•æ•°æ®åº“ï¼šY
# - é‡æ–°åŠ è½½æƒé™è¡¨ï¼šY
```

### 3.4 åˆ›å»ºæ•°æ®åº“å¹¶å¯¼å…¥æ•°æ®
```bash
# ç™»å½• MySQL
mysql -u root -p123456

# åœ¨ MySQL ä¸­æ‰§è¡Œä»¥ä¸‹ SQL å‘½ä»¤ï¼š
```

```sql
-- åˆ›å»ºæ•°æ®åº“
CREATE DATABASE cxw CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

-- æ˜¾ç¤ºæ•°æ®åº“ï¼ˆéªŒè¯åˆ›å»ºæˆåŠŸï¼‰
SHOW DATABASES;

-- é€€å‡º MySQL
EXIT;
```

```bash
# å¯¼å…¥æ•°æ®åº“æ•°æ®
mysql -u root -p123456 cxw < /tmp/cxw_backup.sql

# éªŒè¯å¯¼å…¥æˆåŠŸ
mysql -u root -p123456 cxw -e "SHOW TABLES;"
mysql -u root -p123456 cxw -e "SELECT COUNT(*) as table_count FROM information_schema.tables WHERE table_schema = 'cxw';"
```

---

## ğŸŒ 4. Nginx é…ç½®

### 4.1 åˆ›å»º Nginx ç«™ç‚¹é…ç½®
```bash
# åˆ›å»ºç«™ç‚¹é…ç½®æ–‡ä»¶
cat > /etc/nginx/sites-available/xingyingmei << 'EOF'
server {
    listen 80;
    server_name 3231232313213.xyz www.3231232313213.xyz;
    
    # å‰ç«¯æ–‡ä»¶ç›®å½•
    root /opt/xingyingmei/dist;
    index index.html;
    
    # å‰ç«¯è·¯ç”±å¤„ç†
    location / {
        try_files $uri $uri/ /index.html;
    }
    
    # å¤„ç†ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶
    location /uploads/ {
        alias /opt/xingyingmei/uploads/;
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
    
    # API ä»£ç†åˆ°åç«¯
    location /api/ {
        proxy_pass http://localhost:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        
        # å¤„ç†å¤§æ–‡ä»¶ä¸Šä¼ 
        client_max_body_size 50M;
    }
    
    # é™æ€èµ„æºç¼“å­˜
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
}
EOF
```

### 4.2 å¯ç”¨ç«™ç‚¹é…ç½®
```bash
# å¯ç”¨æ–°ç«™ç‚¹
ln -s /etc/nginx/sites-available/xingyingmei /etc/nginx/sites-enabled/

# åˆ é™¤é»˜è®¤ç«™ç‚¹
rm -f /etc/nginx/sites-enabled/default

# æµ‹è¯• Nginx é…ç½®
nginx -t

# é‡å¯ Nginx
systemctl restart nginx
systemctl enable nginx
```

---

## ğŸš€ 5. Spring Boot æœåŠ¡é…ç½®

### 5.1 åˆ›å»º systemd æœåŠ¡æ–‡ä»¶
```bash
# åˆ›å»ºæœåŠ¡é…ç½®æ–‡ä»¶
cat > /etc/systemd/system/xingyingmei.service << 'EOF'
[Unit]
Description=XingYingMei Study Service
After=network.target mysql.service

[Service]
Type=simple
User=xingyingmei
WorkingDirectory=/opt/xingyingmei
ExecStart=/usr/bin/java -jar target/study-service-0.0.1-SNAPSHOT.jar
Restart=always
RestartSec=10

# ç¯å¢ƒå˜é‡
Environment=SPRING_PROFILES_ACTIVE=prod
Environment=SERVER_PORT=8080
Environment=JAVA_OPTS="-Xmx512m -Xms256m"

# æ—¥å¿—é…ç½®
StandardOutput=journal
StandardError=journal

[Install]
WantedBy=multi-user.target
EOF
```

### 5.2 å¯åŠ¨æœåŠ¡
```bash
# é‡æ–°åŠ è½½ systemd é…ç½®
systemctl daemon-reload

# å¯åŠ¨å¹¶å¯ç”¨æœåŠ¡
systemctl enable xingyingmei
systemctl start xingyingmei

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
systemctl status xingyingmei
```

---

## ğŸ”’ 6. é˜²ç«å¢™é…ç½®

```bash
# é…ç½® UFW é˜²ç«å¢™
ufw allow OpenSSH
ufw allow 'Nginx Full'
ufw --force enable

# æ£€æŸ¥é˜²ç«å¢™çŠ¶æ€
ufw status
```

---

## âœ… 7. éƒ¨ç½²éªŒè¯

### 7.1 æ£€æŸ¥æœåŠ¡çŠ¶æ€
```bash
# æ£€æŸ¥æ‰€æœ‰æœåŠ¡çŠ¶æ€
systemctl status nginx
systemctl status xingyingmei
systemctl status mysql

# æ£€æŸ¥ç«¯å£ç›‘å¬
netstat -tlnp | grep :80
netstat -tlnp | grep :8080
netstat -tlnp | grep :3306
```

### 7.2 æµ‹è¯•ç½‘ç«™è®¿é—®
```bash
# æµ‹è¯•æœ¬åœ°è®¿é—®
curl -I http://localhost
curl -I http://localhost:8080/api/health

# æµ‹è¯•åŸŸåè®¿é—®
curl -I http://3231232313213.xyz
```

### 7.3 æŸ¥çœ‹æ—¥å¿—
```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
journalctl -u xingyingmei -f

# æŸ¥çœ‹ Nginx æ—¥å¿—
tail -f /var/log/nginx/access.log
tail -f /var/log/nginx/error.log

# æŸ¥çœ‹ MySQL æ—¥å¿—
tail -f /var/log/mysql/error.log
```

---

## ğŸ” 8. SSL è¯ä¹¦é…ç½®ï¼ˆå¯é€‰ä½†æ¨èï¼‰

### 8.1 å®‰è£… Certbot
```bash
# å®‰è£… Certbot
apt install -y certbot python3-certbot-nginx
```

### 8.2 è·å– SSL è¯ä¹¦
```bash
# è·å–è¯ä¹¦
certbot --nginx -d 3231232313213.xyz -d www.3231232313213.xyz

# è®¾ç½®è‡ªåŠ¨ç»­æœŸ
crontab -e
# æ·»åŠ ä»¥ä¸‹è¡Œï¼š
# 0 12 * * * /usr/bin/certbot renew --quiet
```

---

## ğŸ”„ 9. é¡¹ç›®æ›´æ–°æµç¨‹

### 9.1 æ›´æ–°ä»£ç 
```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ›´æ–°é¡¹ç›®
cd /opt/xingyingmei

# å¦‚æœä½¿ç”¨ Git
git pull origin main

# é‡æ–°æ„å»º
npm run build
mvn clean compile
mvn clean package -DskipTests
sudo chown -R www-data:www-data dist
sudo chmod -R u=rwX,go=rX dist
```

### 9.2 é‡å¯æœåŠ¡
```bash
# é‡å¯åº”ç”¨æœåŠ¡
systemctl restart xingyingmei

systemctl stop xingyingmei.service 

# é‡æ–°åŠ è½½ Nginxï¼ˆå¦‚æœé…ç½®æœ‰å˜åŒ–ï¼‰
nginx -s reload
```
sudo apt update
sudo apt install fail2ban
sudo systemctl enable fail2ban
sudo systemctl start fail2ban
---

## ğŸ†˜ 10. å¸¸è§é—®é¢˜æ’æŸ¥

### 10.1 æœåŠ¡å¯åŠ¨å¤±è´¥
```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—
journalctl -u xingyingmei -n 50

# æ£€æŸ¥ Java ç‰ˆæœ¬
java -version

# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :8080
```

### 10.2 æ•°æ®åº“è¿æ¥å¤±è´¥
```bash
# æµ‹è¯•æ•°æ®åº“è¿æ¥
mysql -u root -p123456 -e "SHOW DATABASES;"

# æ£€æŸ¥ MySQL æœåŠ¡
systemctl status mysql

# é‡å¯ MySQL
systemctl restart mysql
```

### 10.3 Nginx é…ç½®é”™è¯¯
```bash
# æµ‹è¯•é…ç½®æ–‡ä»¶
nginx -t

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
tail -f /var/log/nginx/error.log

# é‡æ–°åŠ è½½é…ç½®
nginx -s reload
```

---

## ğŸ“ 11. è®¿é—®ä¿¡æ¯

éƒ¨ç½²å®Œæˆåï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è®¿é—®ï¼š

- **ç½‘ç«™åœ°å€**: http://3231232313213.xyz æˆ– https://3231232313213.xyzï¼ˆå¦‚æœé…ç½®äº†SSLï¼‰
- **API åœ°å€**: http://3231232313213.xyz/api/
- **ç®¡ç†åå°**: http://3231232313213.xyz/admin/

---

## ğŸ“ 12. é‡è¦æ–‡ä»¶è·¯å¾„

```
/opt/xingyingmei/                          # é¡¹ç›®æ ¹ç›®å½•
â”œâ”€â”€ dist/                                  # å‰ç«¯æ„å»ºæ–‡ä»¶
â”œâ”€â”€ target/                                # åç«¯æ„å»ºæ–‡ä»¶
â”œâ”€â”€ uploads/                               # ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶
â”œâ”€â”€ logs/                                  # åº”ç”¨æ—¥å¿—
â””â”€â”€ src/main/resources/application.properties  # æ•°æ®åº“é…ç½®

/etc/nginx/sites-available/xingyingmei     # Nginx é…ç½®æ–‡ä»¶
/etc/systemd/system/xingyingmei.service    # ç³»ç»ŸæœåŠ¡é…ç½®
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å®‰å…¨æ€§**: ç”Ÿäº§ç¯å¢ƒä¸­åº”è¯¥ä¿®æ”¹é»˜è®¤å¯†ç 
2. **å¤‡ä»½**: å®šæœŸå¤‡ä»½æ•°æ®åº“å’Œé‡è¦æ–‡ä»¶
3. **ç›‘æ§**: å»ºè®®é…ç½®æœåŠ¡ç›‘æ§å’Œæ—¥å¿—è½®è½¬
4. **æ›´æ–°**: å®šæœŸæ›´æ–°ç³»ç»Ÿå’Œä¾èµ–åŒ…
5. **SSL**: å¼ºçƒˆå»ºè®®é…ç½® HTTPS

---

*éƒ¨ç½²å®Œæˆï¼ğŸ‰*

cd /Users/chenxiwen/code/web1/xingyingmei

SERVER="root@115.159.152.42"
PORT="2222"
DEST="/opt/xingyingmei"

scp -P "${PORT}" src/api/schoolService.js \
  "${SERVER}:${DEST}/src/api/schoolService.js"

scp -P "${PORT}" src/views/application/study.vue \
  "${SERVER}:${DEST}/src/views/application/study.vue"

scp -P "${PORT}" src/main/java/com/study/service/schools/SchoolController.java \
  "${SERVER}:${DEST}/src/main/java/com/study/service/schools/SchoolController.java"

  scp -P "${PORT}" src/views/Country.vue \
  "${SERVER}:${DEST}/src/views/Country.vue"

  scp -P "${PORT}" src/views/ai-school-selection/matching/components/StudentInfoForm.vue \
  "${SERVER}:${DEST}/src/views/ai-school-selection/matching/components/StudentInfoForm.vue"

  scp -P "${PORT}" src/main/java/com/study/controller/MatchingController.java \
  "${SERVER}:${DEST}/src/main/java/com/study/controller/MatchingController.java"

scp -P "${PORT}" src/components/homefirst2/QuantumHeroScene.vue \
  "${SERVER}:${DEST}/src/components/homefirst2/QuantumHeroScene.vue"

scp -P "${PORT}" src/views/HomeFirst2.vue \
  "${SERVER}:${DEST}/src/views/HomeFirst2.vue"

scp -P "${PORT}" src/main/java/com/study/service/matching/MatchingResultService.java \
  "${SERVER}:${DEST}/src/main/java/com/study/service/matching/MatchingResultService.java"

scp -P "${PORT}" src/main/java/com/study/service/matching/MatchingAlgorithmManager.java \
  "${SERVER}:${DEST}/src/main/java/com/study/service/matching/MatchingAlgorithmManager.java"

scp -P "${PORT}" src/views/ai-school-selection/matching/SchoolMatching.vue \
  "${SERVER}:${DEST}/src/views/ai-school-selection/matching/SchoolMatching.vue"

scp -P "${PORT}" src/composables/useMajorCategories.js \
  "${SERVER}:${DEST}/src/composables/useMajorCategories.js"

scp -P "${PORT}" \
  "src/views/ai-school-selection/matching/components/MatchingResults.vue" \
  "${SERVER}:${DEST}/src/views/ai-school-selection/matching/components/MatchingResults.vue"

  file.upload-dir=/opt/xingyingmei/uploads

  # è·¨åŸŸé…ç½®
spring.mvc.cors.allowed-origins=http://localhost:3000,http://localhost:8080,http://3231232313213.xyz,http://www.3231232313213.xyz

spring.datasource.password=Root123456!


MatchingResult.vueæ–‡ä»¶


åç«¯æ¥å£ä¸çŠ¶æ€æµè½¬ï¼ˆè‡ªä¸»ç”³è¯·ï¼‰

- çŠ¶æ€å­—å…¸ï¼ˆè‹±æ–‡å­˜å‚¨ / ä¸­æ–‡å±•ç¤ºï¼‰ ï¼š selected â†’ submitted â†’ under_review â†’ interview â†’ admitted / rejected ï¼Œå¦å¤–è¿˜å®šä¹‰äº† visa_processing / visa_approved / visa_rejected / enrolled ï¼ˆä½†è¿›åº¦ç”Ÿæˆé€»è¾‘ç›®å‰æœªè¦†ç›–è¿™äº›ç­¾è¯/å…¥å­¦çŠ¶æ€åˆ†æ”¯ï¼‰è§ ApplicationSchoolController.java:L25-L53 ä¸ ApplicationSchoolController.java:L454-L578 ã€‚
- æäº¤ç”³è¯· ï¼š POST /api/application-school/submit ï¼Œå…¥å‚ä¸º ApplicationSchool å¯¹è±¡ï¼ˆåŒ…å« userId/studentId/schoolId/majorId ç­‰ï¼‰è§ ApplicationSchoolController.java:L72-L84 ã€‚
- ç”³è¯·åˆ—è¡¨ ï¼š GET /api/application-school/list?userId&studentId&country ï¼Œè¿”å›æ¯æ¡ç”³è¯·çš„è‹±æ–‡çŠ¶æ€ + ä¸­æ–‡å±•ç¤ºå­—æ®µ applicationStatusDisplay ï¼ˆåŒæ—¶å¸¦ student/user åŸºç¡€ä¿¡æ¯ï¼‰è§ ApplicationSchoolController.java:L86-L138 ã€‚
- æ›´æ–°çŠ¶æ€ ï¼š PUT /api/application-school/{id}/status?status=xxx ï¼Œæ”¯æŒä¼ ä¸­æ–‡ï¼ˆè‡ªåŠ¨åå‘æ˜ å°„ï¼‰æˆ–è‹±æ–‡çŠ¶æ€è§ ApplicationSchoolController.java:L140-L157 ã€‚
- è¿›åº¦/æ—¶é—´çº¿ ï¼š GET /api/application-school/progress?userId&studentId&schoolId&applicationId ï¼Œè‹¥ä¼  applicationId åªç”Ÿæˆå•ç”³è¯·çš„ applicationStatus/notifications/tasks ï¼›å¦åˆ™ä¼šæŠŠå¤šä¸ªç”³è¯·çš„æ—¶é—´çº¿/é€šçŸ¥/å¾…åŠâ€œç›´æ¥åˆå¹¶â€è¿”å›è§ ApplicationSchoolController.java:L364-L449 ã€‚
- ç”³è¯·è¯¦æƒ… ï¼š GET /api/application-school/detail/{id} ï¼ˆåŒæ ·æä¾› applicationStatusDisplay ï¼‰è§ ApplicationSchoolController.java:L174-L202 ã€‚
- ç­¾è¯ä¿¡æ¯æ ‡è®° ï¼š PUT /api/application-school/{id}/visa-info?visaInfoProvided=true/false è§ ApplicationSchoolController.java:L230-L246 ã€‚
- åˆ é™¤ç”³è¯· ï¼š DELETE /api/application-school/{id} è§ ApplicationSchoolController.java:L248-L262 ã€‚
- å­¦æ ¡+ä¸“ä¸šç»„åˆåˆ—è¡¨ ï¼š GET /api/application-school/schools?userId&studentId ï¼ˆç”¨äºå‰ç«¯å±•ç¤ºâ€œå·²ç”³è¯·çš„å­¦æ ¡/ä¸“ä¸šâ€å¹¶å»é‡ï¼‰è§ ApplicationSchoolController.java:L317-L362 ã€‚
- availableï¼ˆå½“å‰è¯­ä¹‰åâ€œå·²ç”³è¯·åˆ—è¡¨ç¤ºä¾‹â€ï¼‰ ï¼š GET /api/application-school/available?userId ç°åœ¨è¿”å›çš„æ˜¯ç”¨æˆ·å·²æäº¤ç”³è¯·çš„å­¦æ ¡ä¿¡æ¯ï¼ˆæ³¨é‡Šå†™â€œå¯ç”³è¯·â€ï¼Œå®ç°æ›´åƒâ€œå·²ç”³è¯·â€ï¼‰è§ ApplicationSchoolController.java:L270-L305 ã€‚
ææ–™ä¸Šä¼ /ä¸‹è½½ï¼ˆè‡ªä¸»ç”³è¯·ææ–™ï¼‰

- ä¸Šä¼ ææ–™ï¼ˆå­¦ç”Ÿç«¯ï¼‰ ï¼š POST /api/files/application/materials/student/{studentId}/application-school/{applicationId} ï¼Œè¡¨å•å­—æ®µï¼š file + type ï¼ˆææ–™ç±»å‹ï¼‰è§ FileController.java:L37-L82 ã€‚
- ææ–™æŸ¥è¯¢ ï¼š GET /api/files/application/materials/student/{studentId} ä¸ GET /api/files/application/materials/student/{studentId}/application-school/{applicationId} ï¼ŒæŒ‰ FileDTO.description = "ç”³è¯·ææ–™: <materialType>" åˆ†ç»„è¿”å›è§ FileController.java:L84-L144 ã€‚
- ä¸‹è½½/é¢„è§ˆ ï¼š GET /api/files/download/{studentId}/{applicationId}/{filename}?download=true/false ï¼Œè·¯å¾„ç›´æ¥æ‹¼ uploadBaseDir/studentId/applicationId/filename è§ FileController.java:L146-L177 ã€‚
- åˆ é™¤æ–‡ä»¶ ï¼š DELETE /api/files/delete/{fileId} è§ FileController.java:L207-L236 ã€‚
- å­˜å‚¨è§„åˆ™ä¸ææ–™ç±»å‹è§„èŒƒåŒ–ï¼ˆå…³é”®ï¼‰ ï¼šåç«¯æœŸæœ›å‰ç«¯ä¼ çš„ææ–™ç±»å‹æ˜¯ camelCaseï¼ˆå¦‚ personalStatement ï¼‰ï¼Œå¹¶å°†å…¶æ˜ å°„ä¸º snake_case ä»…ç”¨äºç”Ÿæˆæ–‡ä»¶åï¼ˆå¦‚ personal_statement-...pdf ï¼‰ï¼›åŒæ—¶æ•°æ®åº“é‡Œå­˜çš„ description ä»æ˜¯åŸå§‹ä¼ å…¥çš„ materialType è§ FileService.java:L36-L49 ä¸ FileService.java:L147-L228 ã€‚
å½“å‰æœ€å€¼å¾—ä¼˜å…ˆæ”¹çš„ä¼˜åŒ–ç‚¹ï¼ˆæŒ‰å½±å“æ’åºï¼‰

- çŠ¶æ€è¯­ä¹‰æ··ç”¨ ï¼š selected åœ¨æ—¶é—´çº¿é‡Œè¡¨ç¤ºâ€œåˆšé€‰å­¦æ ¡æœªæäº¤â€ï¼Œä½†åœ¨é€šçŸ¥/å¾…åŠé‡Œåˆè¢«å½“æˆâ€œå·²å½•å–åå…¥å­¦æ‰‹ç»­â€ï¼ˆé€šçŸ¥ç”šè‡³æ˜¯â€œå½•å–é€šçŸ¥â€ï¼‰è§ generateStatusTimeline selected vs generateNotifications selected vs generateTasks selected ã€‚å»ºè®®æŠŠâ€œæœªæäº¤é˜¶æ®µâ€ä¸â€œå½•å–åé˜¶æ®µâ€æ‹†æˆä¸åŒçŠ¶æ€ï¼ˆä¾‹å¦‚ draft/selected ç”¨äºæœªæäº¤ï¼› admitted æ‰è§¦å‘å…¥å­¦æ‰‹ç»­ï¼‰ï¼Œå¦åˆ™å‰ç«¯çœ‹åˆ°çš„æé†’ä¼šå®Œå…¨åã€‚
- è¿›åº¦æ¥å£åˆå¹¶å¤šç”³è¯·ä¼šä¸¢å½’å± ï¼š /progress åœ¨â€œå¤šç”³è¯·â€åœºæ™¯æŠŠæ‰€æœ‰ç”³è¯·çš„ timeline/notifications/tasks ç›´æ¥ addAll åˆå¹¶ï¼Œæ—¶é—´çº¿é¡¹é‡Œæ²¡æœ‰ applicationId ï¼Œå‰ç«¯å¾ˆéš¾æ­£ç¡®å±•ç¤º/ç­›é€‰ã€‚å»ºè®®è¿”å›ç»“æ„æ”¹ä¸º byApplication: { [applicationId]: {timeline, notifications, tasks} } æˆ–è€…ç»™æ¯ä¸€é¡¹éƒ½åŠ  applicationId ï¼ˆè‡³å°‘å¯è¿‡æ»¤ï¼‰è§ ApplicationSchoolController.java:L423-L437 ã€‚
- æ—¶é—´çº¿å¤§é‡ç¡¬ç¼–ç æ—¥æœŸ ï¼š 2024-03-16/03-25/04-15... è¿™ç±»â€œæ¼”ç¤ºæ•°æ®â€ä¼šè®©çœŸå®è¿›åº¦äº§ç”Ÿè¯¯å¯¼ã€‚å»ºè®®ç”¨ä¸€ä¸ª ApplicationStatusHistory ï¼ˆæˆ–åœ¨ ApplicationSchool ä¸Šè¡¥å……å„é˜¶æ®µæ—¶é—´å­—æ®µï¼‰æ¥ç”Ÿæˆæ—¶é—´çº¿ï¼›æœ€å°‘ä¹Ÿåº”ç»Ÿä¸€ä» submitTime æ¨å¯¼â€œå·²æäº¤â€èŠ‚ç‚¹ï¼Œå¹¶æŠŠå…¶å®ƒèŠ‚ç‚¹å˜æˆç›¸å¯¹æè¿°è€Œä¸æ˜¯å›ºå®šæ—¥æœŸè§ ApplicationSchoolController.java:L464-L572 ã€‚
- ææ–™ç±»å‹è¦åšå¼ºä¸€è‡´ï¼ˆé¿å… camel/snake æ··ä¼ ï¼‰ ï¼šç°åœ¨â€œæ–‡ä»¶åæ˜ å°„â€æ”¯æŒ personalStatementâ†’personal_statement ï¼Œä½†å¦‚æœå‰ç«¯ç›´æ¥ä¼  snake_caseï¼ˆ personal_statement ï¼‰ï¼Œåç«¯ä¼šèµ°é»˜è®¤ document æ–‡ä»¶åï¼Œä¸”ææ–™åˆ†ç»„ key å˜æˆ personal_statement ï¼Œä¼šå¯¼è‡´ admin ç«¯ææ–™çŠ¶æ€æ˜ å°„å¯¹ä¸ä¸Šã€‚å»ºè®®åœ¨ storeApplicationFile å…¥å£å…ˆåšä¸€æ¬¡ normalizeï¼šæŠŠ snake_case ç»Ÿä¸€è½¬å› camelCase å†å­˜ description ï¼Œæˆ–åŒæ—¶æŠŠ snake_case ä¹ŸåŠ å…¥ MATERIAL_TYPE_MAPPING å…¼å®¹è§ FileService.java:L36-L49 ä¸ FileController.java:L252-L304 ã€‚
- admin æ¶ˆæ¯ receiverId å¯èƒ½è¯¯ç”¨ studentId ï¼š ApplicationMonitor.vue é‡Œ receiverId = userId ?? studentId ï¼Œå¦‚æœæ¶ˆæ¯ç³»ç»Ÿçš„æ¥æ”¶è€…æ˜¯â€œè´¦å· userIdâ€ï¼Œå›é€€åˆ° studentId ä¼šæŠŠæ¶ˆæ¯æŠ•é€’åˆ°é”™è¯¯å¯¹è±¡/æŸ¥ä¸åˆ°ç”¨æˆ·ã€‚æ›´ç¨³å¦¥çš„æ˜¯ä¿è¯ç”³è¯·åˆ—è¡¨/è¯¦æƒ…å§‹ç»ˆå¸¦ userId ï¼Œå¹¶å¼ºåˆ¶ç”¨ userId å‘é€è§ ApplicationMonitor.vue:L1173-L1185 ã€‚
å¦‚æœä½ å¸Œæœ›æˆ‘æŠŠä¸Šè¿°ä¼˜åŒ–ç‚¹ç›´æ¥è½åœ°æ”¹ä»£ç ï¼Œæˆ‘å»ºè®®ä¼˜å…ˆåšä¸¤ä»¶ï¼šâ‘ ä¿®æ­£ selected çš„é€šçŸ¥/å¾…åŠé€»è¾‘ï¼ˆé¿å…â€œæœªæäº¤å´æç¤ºå½•å–â€ï¼‰ï¼›â‘¡è°ƒæ•´ /progress è¿”å›ç»“æ„æˆ–è¡¥é½ applicationId ï¼Œè®©å¤šç”³è¯·åœºæ™¯å¯ç”¨ã€‚




