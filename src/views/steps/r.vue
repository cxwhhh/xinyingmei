<template>
  <div class="r-container">
    <!-- å¯¼èˆªæ  -->
    <nav-bar></nav-bar>

    <!-- ä¸»æ¨ªå¹… -->
    <div class="hero-section">
      <div class="hero-content">
        <div class="section-label">REBATE PROGRAM</div>
        <h1 class="hero-title" ref="heroTitle">å…¥å­¦å¥–åŠ±</h1>
        <div class="gold-separator"></div>
        <p class="hero-tagline" ref="heroTagline">é€æ˜ã€é«˜æ•ˆã€ä¸ºæ‚¨äº‰å–æœ€å¤§æƒç›Š</p>
        <div class="hero-stats" ref="heroStats">
          <div class="stat-item">
            <span class="stat-number">15%</span>
            <span class="stat-label">å¹³å‡å¥–åŠ±ç‡</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">Â¥35,000</span>
            <span class="stat-label">å¹³å‡å¥–åŠ±é‡‘é¢</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">3,000+</span>
            <span class="stat-label">æˆåŠŸæ¡ˆä¾‹</span>
          </div>
        </div>
        <button @click="scrollToRebateInfo" class="hero-button" ref="heroButton">
          äº†è§£çƒ­é—¨å­¦æ ¡å¥–åŠ±ä¿¡æ¯
        </button>
      </div>
    </div>

    <!-- å¥–åŠ±ä»‹ç» -->
    <div class="intro-section">
      <div class="container">
        <div class="intro-card">
          <div class="intro-header">
            <h2 class="intro-title" ref="introTitle">ğŸ’° ä»€ä¹ˆæ˜¯å…¥å­¦å¥–åŠ±ï¼Ÿ</h2>
            <p class="intro-subtitle" ref="introText">ç®€å•æ¥è¯´ï¼Œå°±æ˜¯å­¦æ ¡ç»™å¹³å°çš„ä½£é‡‘ï¼Œå¹³å°è¿”è¿˜ç»™ä½ çš„é’±</p>
          </div>

          <div class="intro-content">
            <div class="intro-explanation">
              <div class="explanation-item">
                <div class="step-number">1</div>
                <div class="step-content">
                  <h4>ä½ é€šè¿‡å¹³å°ç”³è¯·å­¦æ ¡</h4>
                  <p>é€‰æ‹©æˆ‘ä»¬çš„ç•™å­¦æœåŠ¡</p>
                </div>
              </div>
              <div class="flow-arrow">â†’</div>
              <div class="explanation-item">
                <div class="step-number">2</div>
                <div class="step-content">
                  <h4>å­¦æ ¡ç»™å¹³å°ä½£é‡‘</h4>
                  <p>é€šå¸¸æ˜¯å­¦è´¹çš„10-20%</p>
                </div>
              </div>
              <div class="flow-arrow">â†’</div>
              <div class="explanation-item">
                <div class="step-number">3</div>
                <div class="step-content">
                  <h4>æˆ‘ä»¬è¿”è¿˜ç»™ä½ </h4>
                  <p>æœ€é«˜å¯è¿”è¿˜15%å­¦è´¹</p>
                </div>
              </div>
            </div>

            <div class="intro-benefits">
              <div class="benefit-tag">âœ… å®Œå…¨åˆæ³•åˆè§„</div>
              <div class="benefit-tag">âœ… ä¸å½±å“ç”³è¯·ç»“æœ</div>
              <div class="benefit-tag">âœ… èŠ‚çœç•™å­¦æˆæœ¬</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ç”³è¯·æµç¨‹ -->
    <div class="process-section">
      <div class="container">
        <h2 class="section-title">ğŸš€ å¦‚ä½•è·å¾—å…¥å­¦å¥–åŠ±ï¼Ÿåªéœ€5æ­¥</h2>
        <div class="process-grid">
          <div v-for="(step, index) in processSteps" :key="index" class="process-card" ref="processStepsRefs">
            <div class="process-number">{{ index + 1 }}</div>
            <div class="process-icon">
              <span v-if="step.icon === 'UserGroupIcon'">ğŸ‘¥</span>
              <span v-else-if="step.icon === 'DocumentTextIcon'">ğŸ“</span>
              <span v-else-if="step.icon === 'AcademicCapIcon'">ğŸ“</span>
              <span v-else-if="step.icon === 'CreditCardIcon'">ğŸ’³</span>
              <span v-else-if="step.icon === 'BanknotesIcon'">ğŸ’°</span>
            </div>
            <h3 class="process-title">{{ step.title }}</h3>
            <p class="process-desc">{{ getSimpleDescription(step.title) }}</p>
            <div class="process-time">{{ getProcessTime(index) }}</div>
          </div>
        </div>

        <div class="process-note">
          <div class="note-icon">ğŸ’¡</div>
          <div class="note-content">
            <strong>æ¸©é¦¨æç¤ºï¼š</strong>æ•´ä¸ªæµç¨‹å®Œå…¨å…è´¹ï¼Œæˆ‘ä»¬æ‰¿è¯ºåœ¨å­¦è´¹åˆ°è´¦å7ä¸ªå·¥ä½œæ—¥å†…è¿”è¿˜å¥–åŠ±é‡‘é¢
          </div>
        </div>
      </div>
    </div>

    <!-- çƒ­é—¨å¥–åŠ±ä¿¡æ¯ -->
    <div class="rebate-section" ref="rebateInfoSection">
      <div class="container">
        <div class="rebate-header">
          <h2 class="section-title">çƒ­é—¨å¥–åŠ±ä¿¡æ¯</h2>
          <div class="rebate-filters">
            <button v-for="(tab, index) in rebateTabs" :key="index" @click="activeTabIndex = index" class="filter-btn"
              :class="{ 'active': activeTabIndex === index }">
              {{ tab }}
            </button>
          </div>
        </div>

        <div class="rebate-grid">
          <div v-for="(rebate, index) in filteredRebates" :key="index" class="rebate-card" ref="rebateCards">
            <div class="card-header">
              <div class="school-info">
                <h3 class="school-name">{{ rebate.school }}</h3>
                <span class="school-country">{{ rebate.country }}</span>
              </div>
              <div class="rebate-badge">{{ rebate.rebateRate }}</div>
            </div>

            <div class="card-body">
              <div class="rebate-metrics">
                <div class="metric">
                  <span class="metric-label">å­¦å†</span>
                  <span class="metric-value">{{ rebate.degree }}</span>
                </div>
                <div class="metric">
                  <span class="metric-label">å­¦è´¹</span>
                  <span class="metric-value">{{ rebate.tuition }}</span>
                </div>
              </div>

              <div class="rebate-amount">
                <span class="amount-label">é¢„è®¡å¥–åŠ±</span>
                <span class="amount-value">{{ rebate.rebateAmount }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- æœåŠ¡ä¼˜åŠ¿ -->
    <div class="advantages-section">
      <div class="container">
        <h2 class="section-title" ref="benefitsTitle">ä¸ºä»€ä¹ˆé€‰æ‹©æˆ‘ä»¬</h2>
        <div class="advantages-grid" ref="benefitsGrid">
          <div class="advantage-card" v-for="(benefit, index) in benefits" :key="index">
            <div class="advantage-icon" :class="benefit.iconClass"></div>
            <div class="advantage-content">
              <h3 class="advantage-title">{{ benefit.title }}</h3>
              <p class="advantage-description">{{ benefit.description }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- å¸¸è§é—®é¢˜ -->
    <div class="faq-section">
      <div class="faq-container">
        <div class="faq-header">
          <h2 class="section-title">å¸¸è§é—®é¢˜</h2>
          <p class="section-desc">å…³äºå…¥å­¦å¥–åŠ±ï¼Œè¿™é‡Œä¸ºæ‚¨è§£ç­”</p>
        </div>
        <div class="faq-list">
          <div v-for="(faq, index) in faqs" :key="index" class="faq-item" :class="{ 'is-active': faq.isOpen }"
            ref="faqItems">
            <button class="faq-trigger" @click="toggleFaq(index)" :aria-expanded="faq.isOpen">
              <div class="faq-question-wrapper">
                <span class="faq-number">{{ String(index + 1).padStart(2, '0') }}</span>
                <span class="faq-question">{{ faq.question }}</span>
              </div>
              <span class="faq-icon"></span>
            </button>
            <div class="faq-content" :style="{ maxHeight: faq.isOpen ? faq.height + 'px' : '0px' }">
              <div class="faq-answer" ref="faqAnswers">
                {{ faq.answer }}
                <div v-if="faq.tips" class="faq-tips">
                  <span class="tips-icon">ğŸ’¡</span>
                  <span class="tips-text">{{ faq.tips }}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="faq-footer">
          <p>è¿˜æœ‰å…¶ä»–é—®é¢˜ï¼Ÿ</p>
          <button class="contact-btn">è”ç³»æˆ‘ä»¬è·å–æ›´å¤šå¸®åŠ©</button>
        </div>
      </div>
    </div>


    <!-- é¡µè„š -->
    <footer-bar></footer-bar>
  </div>
</template>

<script setup>
import { ref, nextTick, computed, onMounted, watch } from 'vue'
import NavBar from '../../components/NavBar.vue'
import FooterBar from '../../components/FooterBar.vue'


// å…¥å­¦å¥–åŠ±æµç¨‹æ­¥éª¤
const processSteps = [
  {
    title: 'é€‰æ‹©å¹³å°',
    description: 'æ ¹æ®å¥–åŠ±æ”¿ç­–ã€æœåŠ¡è´¨é‡å’Œå£ç¢‘é€‰æ‹©åˆé€‚çš„ç•™å­¦ç”³è¯·å¹³å°ã€‚æˆ‘ä»¬æä¾›é€æ˜çš„å¥–åŠ±æ¯”ä¾‹å’Œä¸“ä¸šçš„å’¨è¯¢æœåŠ¡ã€‚',
    icon: 'UserGroupIcon'
  },
  {
    title: 'ç­¾è®¢åè®®',
    description: 'ä¸å¹³å°ç­¾è®¢æ˜ç¡®çš„å¥–åŠ±åè®®ï¼Œç¡®ä¿å¥–åŠ±æ¯”ä¾‹ã€è¿”è¿˜æ—¶é—´å’Œæ¡ä»¶ç­‰ç»†èŠ‚æ¸…æ™°ã€‚æˆ‘ä»¬æä¾›æ ‡å‡†åŒ–çš„åè®®æ–‡æœ¬ï¼Œä¿éšœæ‚¨çš„æƒç›Šã€‚',
    icon: 'DocumentTextIcon'
  },
  {
    title: 'ç”³è¯·å­¦æ ¡',
    description: 'å¹³å°ååŠ©æ‚¨ç”³è¯·ç›®æ ‡å­¦æ ¡ï¼Œæä¾›ä¸“ä¸šçš„ç”³è¯·æŒ‡å¯¼å’Œææ–™å‡†å¤‡ã€‚æˆ‘ä»¬çš„é¡¾é—®å›¢é˜Ÿå°†å…¨ç¨‹è·Ÿè¿›æ‚¨çš„ç”³è¯·è¿›åº¦ã€‚',
    icon: 'AcademicCapIcon'
  },
  {
    title: 'ç¼´çº³å­¦è´¹',
    description: 'æ”¶åˆ°å½•å–é€šçŸ¥åï¼ŒæŒ‰ç…§å­¦æ ¡è¦æ±‚ç¼´çº³å­¦è´¹ã€‚æˆ‘ä»¬å°†ååŠ©æ‚¨å®Œæˆå­¦è´¹æ”¯ä»˜æµç¨‹ï¼Œç¡®ä¿èµ„é‡‘å®‰å…¨ã€‚',
    icon: 'CreditCardIcon'
  },
  {
    title: 'è·å–å¥–åŠ±',
    description: 'æ ¹æ®åè®®çº¦å®šçš„æ—¶é—´å’Œæ–¹å¼ï¼Œè·å–ç›¸åº”æ¯”ä¾‹çš„å­¦è´¹å¥–åŠ±ã€‚æˆ‘ä»¬æ‰¿è¯ºå‡†æ—¶è¿”è¿˜ï¼Œè®©æ‚¨å®‰å¿ƒæ— å¿§ã€‚',
    icon: 'BanknotesIcon'
  }
]

// å¥–åŠ±æ ‡ç­¾é¡µ
const rebateTabs = ['å…¨éƒ¨', 'ç¾å›½', 'è‹±å›½', 'æ¾³å¤§åˆ©äºš', 'åŠ æ‹¿å¤§', 'å…¶ä»–'];
const activeTabIndex = ref(0);



// è·å–ç®€åŒ–çš„æµç¨‹æè¿°
const getSimpleDescription = (title) => {
  const descriptions = {
    'é€‰æ‹©å¹³å°': 'è”ç³»æˆ‘ä»¬ï¼Œäº†è§£å¥–åŠ±æ”¿ç­–',
    'ç­¾è®¢åè®®': 'ç­¾ç½²å¥–åŠ±åè®®ï¼Œä¿éšœæƒç›Š',
    'ç”³è¯·å­¦æ ¡': 'æ‚¨è‡ªå·±è‡ªä¸»ç”³è¯·å¿ƒä»ªå­¦æ ¡',
    'ç¼´çº³å­¦è´¹': 'æ”¶åˆ°offeråç¼´çº³å­¦è´¹',
    'è·å–å¥–åŠ±': 'å­¦è´¹åˆ°è´¦åè¿”è¿˜ç»™æ‚¨'
  }
  return descriptions[title] || 'è¯¦ç»†å’¨è¯¢å®¢æœ'
}

// è·å–æµç¨‹æ—¶é—´
const getProcessTime = (index) => {
  const times = ['1å¤©', '1å¤©', '2-6ä¸ªæœˆ', '1å¤©', '7ä¸ªå·¥ä½œæ—¥']
  return times[index] || ''
}

// ç›‘å¬æ ‡ç­¾å˜åŒ–ï¼Œé‡ç½®å¡ç‰‡åŠ¨ç”»
watch(activeTabIndex, async () => {
  await nextTick();
  const cards = document.querySelectorAll('.rebate-card');
  cards.forEach((card, index) => {
    card.style.opacity = '0';
    card.style.transform = 'translateY(20px)';
    setTimeout(() => {
      card.style.opacity = '1';
      card.style.transform = 'translateY(0)';
    }, index * 100);
  });
});

// å¥–åŠ±ä¿¡æ¯æ•°æ®
const rebateInfo = ref([
  {
    country: 'ç¾å›½',
    school: 'å“ˆä½›å¤§å­¦',
    degree: 'ç¡•å£«',
    tuition: 'Â¥350,000/å¹´',
    rebateRate: '15%',
    rebateAmount: 'Â¥52,500'
  },
  {
    country: 'ç¾å›½',
    school: 'æ–¯å¦ç¦å¤§å­¦',
    degree: 'æœ¬ç§‘',
    tuition: 'Â¥320,000/å¹´',
    rebateRate: '12%',
    rebateAmount: 'Â¥38,400'
  },
  {
    country: 'è‹±å›½',
    school: 'ç‰›æ´¥å¤§å­¦',
    degree: 'æœ¬ç§‘',
    tuition: 'Â¥280,000/å¹´',
    rebateRate: '12%',
    rebateAmount: 'Â¥33,600'
  },
  {
    country: 'è‹±å›½',
    school: 'å‰‘æ¡¥å¤§å­¦',
    degree: 'ç¡•å£«',
    tuition: 'Â¥290,000/å¹´',
    rebateRate: '14%',
    rebateAmount: 'Â¥40,600'
  },
  {
    country: 'æ¾³å¤§åˆ©äºš',
    school: 'å¢¨å°”æœ¬å¤§å­¦',
    degree: 'ç¡•å£«',
    tuition: 'Â¥220,000/å¹´',
    rebateRate: '18%',
    rebateAmount: 'Â¥39,600'
  },
  {
    country: 'æ¾³å¤§åˆ©äºš',
    school: 'æ‚‰å°¼å¤§å­¦',
    degree: 'æœ¬ç§‘',
    tuition: 'Â¥210,000/å¹´',
    rebateRate: '16%',
    rebateAmount: 'Â¥33,600'
  },
  {
    country: 'åŠ æ‹¿å¤§',
    school: 'å¤šä¼¦å¤šå¤§å­¦',
    degree: 'æœ¬ç§‘',
    tuition: 'Â¥240,000/å¹´',
    rebateRate: '10%',
    rebateAmount: 'Â¥24,000'
  },
  {
    country: 'åŠ æ‹¿å¤§',
    school: 'éº¦å‰å°”å¤§å­¦',
    degree: 'ç¡•å£«',
    tuition: 'Â¥230,000/å¹´',
    rebateRate: '11%',
    rebateAmount: 'Â¥25,300'
  },
  {
    country: 'æ—¥æœ¬',
    school: 'ä¸œäº¬å¤§å­¦',
    degree: 'ç¡•å£«',
    tuition: 'Â¥180,000/å¹´',
    rebateRate: '8%',
    rebateAmount: 'Â¥14,400'
  },
  {
    country: 'æ–°åŠ å¡',
    school: 'æ–°åŠ å¡å›½ç«‹å¤§å­¦',
    degree: 'æœ¬ç§‘',
    tuition: 'Â¥200,000/å¹´',
    rebateRate: '15%',
    rebateAmount: 'Â¥30,000'
  }
]);

// è¿‡æ»¤å¥–åŠ±ä¿¡æ¯
const filteredRebates = computed(() => {
  const selectedTab = rebateTabs[activeTabIndex.value];
  if (selectedTab === 'å…¨éƒ¨') {
    return rebateInfo.value;
  }
  if (selectedTab === 'å…¶ä»–') {
    const mainCountries = ['ç¾å›½', 'è‹±å›½', 'æ¾³å¤§åˆ©äºš', 'åŠ æ‹¿å¤§'];
    return rebateInfo.value.filter(item => !mainCountries.includes(item.country));
  }
  return rebateInfo.value.filter(item => item.country === selectedTab);
});

// å¥–åŠ±ä¼˜åŠ¿
const benefits = [
  {
    title: 'é€æ˜æ”¿ç­–',
    description: 'æˆ‘ä»¬æä¾›å®Œå…¨é€æ˜çš„å¥–åŠ±æ”¿ç­–ï¼Œè®©æ‚¨æ¸…æ¥šäº†è§£æ¯ä¸€ç¬”è´¹ç”¨çš„å»å‘ã€‚',
    iconClass: 'icon-transparency'
  },
  {
    title: 'æœ€é«˜å¥–åŠ±',
    description: 'æˆ‘ä»¬ä¸ä¼—å¤šçŸ¥åé™¢æ ¡å»ºç«‹äº†é•¿æœŸåˆä½œå…³ç³»ï¼Œç¡®ä¿æ‚¨èƒ½è·å¾—å¸‚åœºä¸Šæœ€é«˜çš„å¥–åŠ±æ¯”ä¾‹ã€‚',
    iconClass: 'icon-percentage'
  },
  {
    title: 'å¿«é€Ÿåˆ°è´¦',
    description: 'ç®€åŒ–çš„å¥–åŠ±æµç¨‹ï¼Œç¡®ä¿æ‚¨çš„å¥–åŠ±é‡‘é¢èƒ½å¤Ÿåœ¨æœ€çŸ­æ—¶é—´å†…åˆ°è´¦ã€‚',
    iconClass: 'icon-speed'
  },
  {
    title: 'ä¸“ä¸šæœåŠ¡',
    description: 'æˆ‘ä»¬çš„ç•™å­¦é¡¾é—®å‡æœ‰æµ·å¤–ç•™å­¦èƒŒæ™¯ï¼Œèƒ½å¤Ÿæä¾›ä¸“ä¸šçš„ç”³è¯·æŒ‡å¯¼ã€‚',
    iconClass: 'icon-service'
  }
];

// FAQæ•°æ®
const faqs = ref([
  {
    question: 'ä»€ä¹ˆæ˜¯å…¥å­¦å¥–åŠ±ï¼Ÿ',
    answer: 'å…¥å­¦å¥–åŠ±æ˜¯æŒ‡ç•™å­¦å¹³å°ä»å­¦æ ¡è·å¾—çš„ä½£é‡‘ä¸­è¿”è¿˜ç»™å­¦ç”Ÿçš„éƒ¨åˆ†é‡‘é¢ï¼Œé€šå¸¸ä»¥å­¦è´¹çš„ç™¾åˆ†æ¯”è®¡ç®—ã€‚',
    isOpen: false,
    height: 0
  },
  {
    question: 'å¦‚ä½•è·å–å…¥å­¦å¥–åŠ±ï¼Ÿ',
    answer: 'è¦è·å–å…¥å­¦å¥–åŠ±ï¼Œæ‚¨éœ€è¦é€šè¿‡æä¾›å¥–åŠ±æœåŠ¡çš„ç•™å­¦å¹³å°ç”³è¯·å­¦æ ¡ã€‚åœ¨ç”³è¯·å‰ï¼Œæ‚¨å¯ä»¥é€šè¿‡æˆ‘ä»¬çš„å¹³å°äº†è§£å„ä¸ªå¹³å°çš„å¥–åŠ±æ”¿ç­–ï¼Œé€‰æ‹©æœ€é€‚åˆæ‚¨çš„æ–¹æ¡ˆã€‚ç”³è¯·æˆåŠŸå¹¶ç¼´çº³å­¦è´¹åï¼Œå¹³å°ä¼šæŒ‰ç…§çº¦å®šçš„æ¯”ä¾‹å’Œæ—¶é—´å°†å¥–åŠ±è¿”è¿˜ç»™æ‚¨ã€‚',
    isOpen: false,
    height: 0
  },
  {
    question: 'å¥–åŠ±ä¸€èˆ¬æ˜¯å¤šå°‘ï¼Ÿ',
    answer: 'å¥–åŠ±æ¯”ä¾‹å› å›½å®¶ã€å­¦æ ¡å’Œä¸“ä¸šè€Œå¼‚ï¼Œä¸€èˆ¬åœ¨å­¦è´¹çš„5%-20%ä¹‹é—´ã€‚çŸ¥åå¤§å­¦å’Œçƒ­é—¨ä¸“ä¸šçš„å¥–åŠ±é€šå¸¸è¾ƒé«˜ï¼Œè€Œä¸€äº›å…¬ç«‹å¤§å­¦æˆ–ç‰¹æ®Šä¸“ä¸šçš„å¥–åŠ±å¯èƒ½è¾ƒä½ã€‚',
    isOpen: false,
    height: 0
  },
  {
    question: 'å¥–åŠ±ä¼šå½±å“ç”³è¯·ç»“æœå—ï¼Ÿ',
    answer: 'æ­£è§„çš„å¥–åŠ±ä¸ä¼šå½±å“æ‚¨çš„ç”³è¯·ç»“æœã€‚å­¦æ ¡ä¸å¹³å°çš„ä½£é‡‘åˆä½œæ˜¯å…¬å¼€é€æ˜çš„å•†ä¸šè¡Œä¸ºï¼Œæ‚¨è·å–éƒ¨åˆ†å¥–åŠ±æ˜¯æ‚¨ä¸å¹³å°ä¹‹é—´çš„åè®®ï¼Œä¸ä¼šå½±å“å­¦æ ¡å¯¹æ‚¨ç”³è¯·çš„è¯„ä¼°ã€‚',
    isOpen: false,
    height: 0
  },
  {
    question: 'ä»€ä¹ˆæ—¶å€™å¯ä»¥æ”¶åˆ°å¥–åŠ±ï¼Ÿ',
    answer: 'å¥–åŠ±å‘æ”¾æ—¶é—´å› ä¸­ä»‹è€Œå¼‚ï¼Œä¸€èˆ¬æœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š1. å­¦ç”Ÿç¼´çº³å­¦è´¹åç«‹å³è¿”è¿˜ï¼›2. å­¦ç”ŸæˆåŠŸå…¥å­¦åè¿”è¿˜ï¼›3. å­¦ç”Ÿå®Œæˆç¬¬ä¸€å­¦æœŸæˆ–ç¬¬ä¸€å­¦å¹´ååˆ†æœŸè¿”è¿˜ã€‚å…·ä½“æ—¶é—´è¯·æŸ¥çœ‹å„ä¸­ä»‹çš„æ”¿ç­–è¯´æ˜ã€‚',
    isOpen: false,
    height: 0
  }
]);

// å¼•ç”¨å…ƒç´ 
const heroTitle = ref(null);
const heroTagline = ref(null);
const heroStats = ref(null);
const heroButton = ref(null);
const introTitle = ref(null);
const introText = ref(null);
const processStepsRefs = ref([]);
const rebateCards = ref([]);
const benefitsTitle = ref(null);
const benefitsGrid = ref(null);
const faqItems = ref([]);
const rebateInfoSection = ref(null);
const faqAnswers = ref([])

// æ–¹æ³•
const scrollToRebateInfo = () => {
  rebateInfoSection.value.scrollIntoView({ behavior: 'smooth' });
};

const toggleFaq = (index) => {
  const faq = faqs.value[index]
  if (!faq.height) {
    // è®¡ç®—å†…å®¹é«˜åº¦
    faq.height = faqAnswers.value[index].offsetHeight
  }
  faq.isOpen = !faq.isOpen
}

// åŠ¨ç”»ç›¸å…³
onMounted(async () => {
  // ç­‰å¾…DOMæ›´æ–°
  await nextTick();

  // æ·»åŠ åˆå§‹åŠ¨ç”»ç±»
  if (heroTitle.value) heroTitle.value.classList.add('animate-fade-in');
  if (heroTagline.value) {
    setTimeout(() => {
      heroTagline.value.classList.add('animate-fade-in');
    }, 200);
  }
  if (heroStats.value) {
    setTimeout(() => {
      heroStats.value.classList.add('animate-fade-in');
    }, 400);
  }
  if (heroButton.value) {
    setTimeout(() => {
      heroButton.value.classList.add('animate-fade-in');
    }, 600);
  }

  // è®¾ç½®æ»šåŠ¨ç›‘å¬
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -100px 0px'
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('animate-fade-in');
        observer.unobserve(entry.target);
      }
    });
  }, observerOptions);

  // è§‚å¯Ÿéœ€è¦åŠ¨ç”»çš„å…ƒç´ 
  [introTitle.value, introText.value, benefitsTitle.value, benefitsGrid.value].forEach(el => {
    if (el) observer.observe(el);
  });

  // æ·»åŠ å¯¹ processSteps çš„è§‚å¯Ÿ
  if (processStepsRefs.value) {
    processStepsRefs.value.forEach((step, index) => {
      if (step) {
        step.style.transitionDelay = `${index * 100}ms`;
        observer.observe(step);
      }
    });
  }

  // å¤„ç†å¤šä¸ªå…ƒç´ çš„å¼•ç”¨
  if (rebateCards.value) {
    rebateCards.value.forEach((card, index) => {
      if (card) {
        card.style.transitionDelay = `${index * 100}ms`;
        observer.observe(card);
      }
    });
  }

  if (faqItems.value) {
    faqItems.value.forEach((item, index) => {
      if (item) {
        item.style.transitionDelay = `${index * 100}ms`;
        observer.observe(item);
      }
    });
  }
});
</script>

<style scoped>
.r-container {
  --primary-color: #C5A059;
  --primary-hover: #B08D45;
  --primary-soft: #f6e9dd;
  --primary-soft-border: #ebd8bc;
  --dark-color: #1c1917;
  --light-color: #F9F8F4;
  --muted-color: #86868b;
  --gray-color: #78716c;
  --border-color: rgba(0, 0, 0, 0.08);
  --shadow-light: 0 1px 3px rgba(0, 0, 0, 0.04);
  --shadow-medium: 0 8px 24px rgba(0, 0, 0, 0.08);
  --border-radius: 12px;
  --transition: all 0.25s ease;

  min-height: 100vh;
  background-color: var(--light-color);
  color: var(--dark-color);
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 24px;
}

.section-title {
  font-family: serif;
  font-size: 2.25rem;
  font-weight: 600;
  color: var(--dark-color);
  text-align: center;
  margin-bottom: 3rem;
  letter-spacing: -0.02em;
  line-height: 1.1;
}

/* åŠ¨ç”»ç±» */
.animate-fade-in {
  animation: fadeIn 0.8s ease forwards;
  opacity: 0;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* æ·¡å…¥æ·¡å‡ºè¿‡æ¸¡ */
.fade-enter-active,
.fade-leave-active {
  transition: opacity 0.3s, max-height 0.5s ease;
  max-height: 500px;
  overflow: hidden;
}

.fade-enter-from,
.fade-leave-to {
  opacity: 0;
  max-height: 0;
}

/* heroåŒºåŸŸæ ·å¼ */
.hero-section {
  background-color: var(--light-color);
  color: var(--dark-color);
  padding: 6rem 1rem 4rem;
  text-align: center;
  position: relative;
}

.hero-section::before {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: radial-gradient(circle at center, rgba(249, 248, 244, 0.92) 0%, rgba(249, 248, 244, 0.6) 50%, rgba(249, 248, 244, 0.3) 100%);
}

.hero-content {
  max-width: 800px;
  margin: 0 auto;
  position: relative;
  z-index: 2;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.section-label {
  font-size: 0.875rem;
  font-weight: 600;
  color: var(--muted-color);
  letter-spacing: 0.05em;
  text-transform: uppercase;
  margin-bottom: 0.5rem;
}

.gold-separator {
  width: 60px;
  height: 4px;
  background-color: var(--primary-color);
  margin: 0 auto 2rem;
  border-radius: 2px;
}

.hero-title {
  font-family: serif;
  font-size: 3rem;
  font-weight: 600;
  margin: 0 0 1.5rem;
  color: var(--dark-color);
  letter-spacing: -0.02em;
  line-height: 1.1;
  opacity: 0;
  transform: translateY(20px);
}

.hero-tagline {
  font-size: 1.25rem;
  margin-bottom: 3rem;
  color: var(--muted-color);
  line-height: 1.6;
  opacity: 0;
  transform: translateY(20px);
}

.hero-stats {
  display: flex;
  justify-content: center;
  gap: 3rem;
  margin-bottom: 3rem;
  opacity: 0;
  transform: translateY(20px);
}

.stat-item {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.stat-number {
  font-size: 2.5rem;
  font-weight: 700;
  color: var(--primary-color);
}

.stat-label {
  font-size: 0.95rem;
  color: var(--muted-color);
}

.hero-button {
  background-color: var(--primary-color);
  color: white;
  border: none;
  padding: 1rem 2rem;
  border-radius: 30px;
  font-size: 1.125rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  opacity: 0;
  transform: translateY(20px);
}

.hero-button:hover {
  background-color: var(--primary-hover);
  transform: scale(1.05);
}

/* ä»‹ç»éƒ¨åˆ†æ ·å¼ */
.intro-section {
  padding: 3rem 0;
  background: var(--light-color);
}

.intro-card {
  background: white;
  border-radius: 20px;
  padding: 2rem;
  box-shadow: var(--shadow-light);
  border: 1px solid var(--border-color);
}

.intro-header {
  text-align: center;
  margin-bottom: 2rem;
}

.intro-title {
  font-size: 1.8rem;
  font-weight: 700;
  color: var(--dark-color);
  margin-bottom: 0.5rem;
  letter-spacing: -0.5px;
}

.intro-subtitle {
  font-size: 1rem;
  color: var(--gray-color);
  font-weight: 500;
}

.intro-content {
  display: flex;
  flex-direction: column;
  gap: 2rem;
}

.intro-explanation {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1rem;
  background: white;
  border-radius: 16px;
  padding: 1.5rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
}

.explanation-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  flex: 1;
}

.step-number {
  width: 32px;
  height: 32px;
  background: var(--primary-color);
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.9rem;
  font-weight: 600;
  margin-bottom: 0.75rem;
}

.step-content h4 {
  font-size: 0.9rem;
  font-weight: 600;
  color: var(--dark-color);
  margin: 0 0 0.25rem 0;
}

.step-content p {
  font-size: 0.8rem;
  color: var(--gray-color);
  margin: 0;
}

.flow-arrow {
  font-size: 1.5rem;
  color: var(--primary-color);
  flex-shrink: 0;
}

.intro-benefits {
  display: flex;
  justify-content: center;
  gap: 1rem;
  flex-wrap: wrap;
}

.benefit-tag {
  background: white;
  border-radius: 20px;
  padding: 0.5rem 1rem;
  font-size: 0.8rem;
  font-weight: 500;
  color: var(--dark-color);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
}

/* æµç¨‹éƒ¨åˆ†æ ·å¼ */
.process-section {
  padding: 3rem 0;
  background: var(--light-color);
}

.process-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1rem;
  margin-bottom: 2rem;
}

.process-card {
  background: white;
  border-radius: 16px;
  padding: 1.5rem;
  text-align: center;
  border: 1px solid var(--border-color);
  box-shadow: var(--shadow-light);
  transition: var(--transition);
  position: relative;
}

.process-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-medium);
  border-color: var(--primary-color);
}

.process-number {
  position: absolute;
  top: -12px;
  left: 50%;
  transform: translateX(-50%);
  width: 24px;
  height: 24px;
  background: var(--primary-color);
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.8rem;
  font-weight: 600;
  box-shadow: 0 2px 4px rgba(197, 160, 89, 0.3);
}

.process-icon {
  font-size: 2rem;
  margin: 0.5rem 0;
}

.process-title {
  font-size: 1rem;
  font-weight: 600;
  color: var(--dark-color);
  margin: 0.5rem 0;
}

.process-desc {
  font-size: 0.8rem;
  color: var(--gray-color);
  margin: 0.5rem 0;
  line-height: 1.4;
}

.process-time {
  background: var(--light-color);
  border-radius: 12px;
  padding: 0.25rem 0.75rem;
  font-size: 0.7rem;
  font-weight: 600;
  color: var(--primary-color);
  display: inline-block;
  margin-top: 0.5rem;
}

.process-note {
  background: var(--primary-soft);
  border: 1px solid var(--primary-soft-border);
  border-radius: 12px;
  padding: 1rem;
  display: flex;
  align-items: flex-start;
  gap: 0.75rem;
  margin-top: 2rem;
}

.note-icon {
  font-size: 1.2rem;
  flex-shrink: 0;
}

.note-content {
  font-size: 0.9rem;
  line-height: 1.4;
  color: #292524;
}

.note-content strong {
  color: #1c1917;
}

/* å¥–åŠ±ä¿¡æ¯éƒ¨åˆ†æ ·å¼ */
.rebate-section {
  padding: 4rem 0;
  background: var(--light-color);
}

.rebate-header {
  text-align: center;
  margin-bottom: 3rem;
}

.rebate-filters {
  display: inline-flex;
  background: var(--light-color);
  border-radius: 12px;
  padding: 4px;
  gap: 2px;
  margin-top: 1rem;
}

.filter-btn {
  background: none;
  border: none;
  padding: 8px 16px;
  font-size: 0.85rem;
  font-weight: 500;
  cursor: pointer;
  border-radius: 8px;
  transition: var(--transition);
  color: var(--gray-color);
  white-space: nowrap;
}

.filter-btn:hover {
  color: var(--dark-color);
  background: rgba(255, 255, 255, 0.5);
}

.filter-btn.active {
  background: var(--primary-color);
  color: white;
  box-shadow: var(--shadow-light);
}

.rebate-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
  gap: 1.5rem;
}

.rebate-card {
  background: white;
  border-radius: var(--border-radius);
  border: 1px solid var(--border-color);
  box-shadow: var(--shadow-light);
  overflow: hidden;
  transition: var(--transition);
}

.rebate-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-medium);
  border-color: var(--primary-color);
}

.card-header {
  padding: 1.5rem;
  border-bottom: 1px solid var(--border-color);
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
}

.school-info {
  flex: 1;
}

.school-name {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--dark-color);
  margin: 0 0 4px 0;
  letter-spacing: -0.2px;
}

.school-country {
  font-size: 0.8rem;
  color: var(--gray-color);
  font-weight: 500;
}

.rebate-badge {
  background: var(--primary-color);
  color: white;
  padding: 4px 8px;
  border-radius: 6px;
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.card-body {
  padding: 1.5rem;
}

.rebate-metrics {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
  margin-bottom: 1.5rem;
}

.metric {
  text-align: center;
  padding: 0.75rem;
  background: var(--light-color);
  border-radius: 8px;
}

.metric-label {
  display: block;
  font-size: 0.7rem;
  color: var(--gray-color);
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 4px;
}

.metric-value {
  display: block;
  font-size: 0.9rem;
  font-weight: 600;
  color: var(--dark-color);
}

.rebate-amount {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-top: 1rem;
  border-top: 1px solid var(--border-color);
}

.amount-label {
  font-size: 0.8rem;
  color: var(--gray-color);
  font-weight: 500;
}

.amount-value {
  font-size: 1.2rem;
  font-weight: 700;
  color: var(--primary-color);
}

/* ä¼˜åŠ¿éƒ¨åˆ†æ ·å¼ */
.advantages-section {
  padding: 4rem 0;
  background: var(--light-color);
}

.advantages-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1.5rem;
}

.advantage-card {
  background: white;
  border-radius: var(--border-radius);
  padding: 1.5rem;
  border: 1px solid var(--border-color);
  box-shadow: var(--shadow-light);
  transition: var(--transition);
  display: flex;
  align-items: flex-start;
  gap: 1rem;
}

.advantage-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-medium);
  border-color: var(--primary-color);
}

.advantage-icon {
  width: 48px;
  height: 48px;
  border-radius: 12px;
  background: var(--light-color);
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px solid var(--border-color);
  flex-shrink: 0;
}

.icon-transparency::before {
  content: "ğŸ”";
  font-size: 1.2rem;
}

.icon-percentage::before {
  content: "ğŸ’°";
  font-size: 1.2rem;
}

.icon-speed::before {
  content: "âš¡";
  font-size: 1.2rem;
}

.icon-service::before {
  content: "ğŸ‘¨â€ğŸ’¼";
  font-size: 1.2rem;
}

.advantage-content {
  flex: 1;
}

.advantage-title {
  font-size: 1rem;
  font-weight: 600;
  color: var(--dark-color);
  margin: 0 0 0.5rem 0;
  letter-spacing: -0.2px;
}

.advantage-description {
  font-size: 0.85rem;
  line-height: 1.4;
  color: var(--gray-color);
  margin: 0;
}

/* FAQéƒ¨åˆ†æ ·å¼ - è‹¹æœé£æ ¼ç®€æ´è®¾è®¡ */
.faq-section {
  padding: 60px 0 120px 0;
  background: var(--light-color);
}

.faq-container {
  max-width: 980px;
  margin: 0 auto;
  padding: 0 22px;
}

.faq-header {
  text-align: center;
  margin-bottom: 64px;
}



.section-desc {
  font-size: 1.25rem;
  color: var(--muted-color);
  font-weight: 400;
  line-height: 1.381;
}

.faq-list {
  background: rgba(255, 255, 255, 0.7);
  border-radius: 18px;
  padding: 8px;
  border: 1px solid var(--border-color);
}

.faq-item {
  background: #fff;
  margin-bottom: 8px;
  border-radius: 14px;
  overflow: hidden;
  transition: all 0.3s ease;
  border-bottom: 1px solid #d2d2d7;
}

.faq-item:last-child {
  border-bottom: none;
  margin-bottom: 0;
}

.faq-item:hover {
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  transform: translateY(-1px);
}

.faq-trigger {
  width: 100%;
  background: none;
  border: none;
  padding: 24px 32px;
  text-align: left;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
  transition: all 0.3s ease;
}

.faq-question-wrapper {
  display: flex;
  align-items: center;
  gap: 16px;
  flex: 1;
}

.faq-number {
  font-size: 14px;
  font-weight: 600;
  color: var(--primary-color);
  background: rgba(197, 160, 89, 0.15);
  padding: 6px 12px;
  border-radius: 8px;
  min-width: 40px;
  text-align: center;
}

.faq-question {
  font-size: 19px;
  font-weight: 600;
  color: #1d1d1f;
  line-height: 1.21;
}

.faq-icon {
  width: 14px;
  height: 14px;
  position: relative;
  flex-shrink: 0;
}

.faq-icon::before,
.faq-icon::after {
  content: '';
  position: absolute;
  background: #1d1d1f;
  border-radius: 1px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.faq-icon::before {
  width: 14px;
  height: 2px;
  top: 6px;
  left: 0;
}

.faq-icon::after {
  width: 2px;
  height: 14px;
  left: 6px;
  top: 0;
}

.is-active .faq-icon::after {
  transform: scaleY(0);
}

.faq-content {
  overflow: hidden;
  transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.faq-answer {
  padding: 0 32px 32px;
  font-size: 17px;
  color: #515154;
  line-height: 1.47;
}

.faq-tips {
  margin-top: 16px;
  padding: 16px;
  background: var(--primary-soft);
  border-radius: 12px;
  display: flex;
  align-items: flex-start;
  gap: 12px;
}

.tips-icon {
  font-size: 16px;
  flex-shrink: 0;
}

.tips-text {
  font-size: 15px;
  color: #515154;
  line-height: 1.4;
}

.faq-footer {
  text-align: center;
  margin-top: 48px;
  padding-top: 32px;
  border-top: 1px solid #d2d2d7;
}

.faq-footer p {
  font-size: 16px;
  color: #86868b;
  margin-bottom: 16px;
}

.contact-btn {
  background: var(--primary-color);
  color: white;
  border: none;
  padding: 12px 24px;
  border-radius: 980px;
  font-size: 17px;
  font-weight: 400;
  cursor: pointer;
  transition: all 0.3s ease;
}

.contact-btn:hover {
  background: var(--primary-hover);
  transform: scale(1.02);
}

/* æ‚¬åœæ•ˆæœä¼˜åŒ– */
.faq-trigger:hover .faq-question {
  color: var(--primary-color);
}

.faq-trigger:hover .faq-icon::before,
.faq-trigger:hover .faq-icon::after {
  background: var(--primary-color);
}

.faq-item:hover {
  transform: translateY(-1px);
}

/* å“åº”å¼è°ƒæ•´ */
@media (max-width: 768px) {
  .faq-section {
    padding: 40px 0 80px 0;
  }

  .section-desc {
    font-size: 17px;
  }

  .faq-list {
    margin-top: 40px;
  }

  .faq-question {
    font-size: 16px;
  }

  .faq-answer {
    font-size: 15px;
  }
}



/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
  .container {
    padding: 0 16px;
  }

  .section-title {
    font-size: 1.5rem;
    margin-bottom: 2rem;
  }

  .hero-title {
    font-size: 2.5rem;
  }

  .hero-tagline {
    font-size: 1.25rem;
  }

  .hero-stats {
    flex-direction: column;
    gap: 1.5rem;
  }

  /* ä»‹ç»éƒ¨åˆ†å“åº”å¼ */
  .intro-card {
    padding: 1.5rem;
  }

  .intro-title {
    font-size: 1.5rem;
  }

  .intro-explanation {
    flex-direction: column;
    gap: 1rem;
    padding: 1rem;
  }

  .flow-arrow {
    transform: rotate(90deg);
    font-size: 1.2rem;
  }

  .intro-benefits {
    gap: 0.5rem;
  }

  .benefit-tag {
    font-size: 0.75rem;
    padding: 0.4rem 0.8rem;
  }

  /* æµç¨‹éƒ¨åˆ†å“åº”å¼ */
  .process-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 0.75rem;
  }

  .process-card {
    padding: 1rem;
  }

  .process-icon {
    font-size: 1.5rem;
  }

  .process-title {
    font-size: 0.9rem;
  }

  .process-desc {
    font-size: 0.75rem;
  }

  .process-note {
    padding: 0.75rem;
    gap: 0.5rem;
  }

  .note-content {
    font-size: 0.8rem;
  }

  /* å¥–åŠ±ä¿¡æ¯å“åº”å¼ */
  .rebate-filters {
    flex-wrap: wrap;
    gap: 4px;
  }

  .filter-btn {
    font-size: 0.8rem;
    padding: 6px 12px;
  }

  .rebate-grid {
    grid-template-columns: 1fr;
    gap: 1rem;
  }

  /* ä¼˜åŠ¿éƒ¨åˆ†å“åº”å¼ */
  .advantages-grid {
    grid-template-columns: 1fr;
    gap: 1rem;
  }

  .advantage-card {
    padding: 1.25rem;
  }
}

@media (max-width: 480px) {

  .intro-section,
  .process-section,
  .rebate-section,
  .advantages-section {
    padding: 2rem 0;
  }

  .section-title {
    font-size: 1.25rem;
  }

  .intro-card {
    padding: 1rem;
  }

  .intro-title {
    font-size: 1.25rem;
  }

  .intro-subtitle {
    font-size: 0.9rem;
  }

  .intro-explanation {
    padding: 0.75rem;
  }

  .step-number {
    width: 28px;
    height: 28px;
    font-size: 0.8rem;
  }

  .step-content h4 {
    font-size: 0.8rem;
  }

  .step-content p {
    font-size: 0.75rem;
  }

  .process-grid {
    grid-template-columns: 1fr;
    gap: 0.5rem;
  }

  .process-card {
    padding: 0.75rem;
  }

  .process-number {
    width: 20px;
    height: 20px;
    font-size: 0.7rem;
    top: -10px;
  }

  .process-icon {
    font-size: 1.25rem;
  }

  .process-title {
    font-size: 0.8rem;
  }

  .process-desc {
    font-size: 0.7rem;
  }

  .process-time {
    font-size: 0.65rem;
    padding: 0.2rem 0.5rem;
  }

  .card-header,
  .card-body {
    padding: 1rem;
  }

  .advantage-card {
    padding: 1rem;
    gap: 0.75rem;
  }

  .advantage-icon {
    width: 40px;
    height: 40px;
  }
}
</style>
